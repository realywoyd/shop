<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="sandbox allow-same-origin allow-modals allow-scripts; img-src 'self' https://i.postimg.cc https://images.unsplash.com">
    <title>Dark Thailand - Надёжный шоп</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #2b0000 100%);
            color: #ff4444;
            overflow-x: hidden;
        }
        .container { max-width: 600px; margin: 0 auto; padding: 15px; position: relative; }
        .header { text-align: center; padding: 15px 0; background-color: #2b2b2b; color: #ff4444; margin-bottom: 20px; border-radius: 5px; border: 2px solid #ff4444; box-shadow: 0 0 10px rgba(255, 68, 68, 0.5); }
        .logo { font-size: 48px; animation: textPulse 2s infinite; display: inline-block; }
        @keyframes textPulse { 0% { transform: scale(1); text-shadow: 0 0 5px #ff4444; } 50% { transform: scale(1.05); text-shadow: 0 0 20px #ff4444, 0 0 30px #ff6666; } 100% { transform: scale(1); text-shadow: 0 0 5px #ff4444; } }
        .header-text { font-size: 16px; margin-top: 5px; animation: textFlicker 3s infinite; }
        @keyframes textFlicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .nav { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .nav-button { background-color: #ff4444; color: #000; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; animation: neonPulse 1.5s infinite; }
        .profile-button { background-color: #ff4444; color: #000; border: none; padding: 0; border-radius: 5px; cursor: pointer; font-size: 26px; width: 60px; height: 40px; line-height: 40px; text-align: center; animation: neonPulse 1.5s infinite; }
        @keyframes neonPulse { 0% { box-shadow: 0 0 5px #ff4444; } 50% { box-shadow: 0 0 20px #ff4444; } 100% { box-shadow: 0 0 5px #ff4444; } }
        .catalog-menu, .profile-menu, .vacancy-menu, .mail-menu { display: none; background-color: #333; border-radius: 5px; padding: 15px; box-shadow: 0 0 15px rgba(255, 68, 68, 0.3); }
        .city-filter { margin-bottom: 15px; }
        .city-filter select, .district-filter select { width: 100%; padding: 10px; background-color: #2b2b2b; color: #ff4444; border: 1px solid #ff4444; border-radius: 5px; font-size: 16px; margin-bottom: 10px; }
        .tabs { display: flex; flex-wrap: wrap; margin-bottom: 15px; }
        .tab { flex: 1; text-align: center; padding: 10px; background-color: #2b2b2b; cursor: pointer; margin: 5px; border-radius: 5px; transition: all 0.3s; }
        .tab:hover { background-color: #ff6666; }
        .tab.active { background-color: #ff4444; color: #000; box-shadow: 0 0 10px #ff4444; }
        .tab-content { display: none; }
        .product-card { background-color: #333; border-radius: 5px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(255, 68, 68, 0.3); transition: transform 0.2s; }
        .product-card:hover { transform: scale(1.02); }
        .product-card h3 { margin-top: 0; color: #ff6666; cursor: pointer; }
        .product-card p { margin: 5px 0; }
        .product-image { width: 100%; max-height: 150px; object-fit: cover; border-radius: 5px; margin-bottom: 10px; }
        .price { font-weight: bold; color: #ff9999; }
        .crypto-price { font-size: 12px; color: #ff6666; }
        .buy-button, .preorder-button { background-color: #ff4444; color: #000; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 5px 0; width: 100%; transition: all 0.3s; }
        .preorder-button { background-color: #ff6666; }
        .buy-button:hover, .preorder-button:hover { background-color: #ff8888; }
        .payment-modal, .product-modal, .deposit-modal, .preorder-modal, .registration-modal, .custom-modal, .confirm-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; }
        .payment-content, .product-content, .deposit-content, .preorder-content, .registration-content, .custom-content, .confirm-content { background: #333; padding: 20px; border-radius: 5px; text-align: center; color: #ff4444; max-width: 500px; max-height: 80vh; overflow-y: auto; border: 2px solid #ff4444; box-shadow: 0 0 15px rgba(255, 68, 68, 0.5); }
        .review { background-color: #2b2b2b; border-left: 4px solid #ff6666; padding: 10px; margin: 10px 0; font-size: 12px; color: #ff9999; text-align: left; display: flex; justify-content: space-between; }
        .review-text { flex-grow: 1; }
        .review-date { flex-shrink: 0; margin-left: 10px; color: #ff6666; }
        .moderator-response { background-color: #2b2b2b; border-left: 4px solid #ff4444; padding: 10px; margin: 5px 0 10px 20px; font-size: 12px; color: #ff6666; text-align: left; }
        .position { margin: 10px 0; text-align: left; }
        .promo-banner { background-color: #ff4444; color: #000; padding: 10px; text-align: center; margin-bottom: 20px; border-radius: 5px; font-weight: bold; }
        .vacancy { margin-bottom: 15px; }
        .vacancy h3 { color: #ff6666; }
        input[type="text"], textarea, input[type="number"], select { width: 100%; padding: 10px; margin: 10px 0; background-color: #2b2b2b; color: #ff4444; border: 1px solid #ff4444; border-radius: 5px; }
        textarea { height: 100px; resize: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="promo-banner" id="promoBanner"></div>

        <div class="header">
            <div class="logo">Dark Thailand</div>
            <div class="header-text" id="headerText"></div>
        </div>
        
        <div class="nav">
            <button class="nav-button" id="catalogButton" onclick="toggleCatalog()"></button>
            <button class="nav-button" id="vacanciesButton" onclick="toggleVacancies()"></button>
            <button class="nav-button" id="mailButton" onclick="toggleMail()"></button>
            <button class="profile-button" onclick="toggleProfile()">☠️</button>
        </div>
        
        <div class="catalog-menu" id="catalogMenu">
            <div class="city-filter">
                <select id="citySelect" onchange="filterByCity()">
                    <option value="all" id="allCitiesOption"></option>
                    <option value="phuket" id="phuketOption"></option>
                    <option value="pattaya" id="pattayaOption"></option>
                    <option value="bangkok" id="bangkokOption"></option>
                    <option value="samui" id="samuiOption"></option>
                </select>
                <select id="districtSelect" onchange="filterByDistrict()">
                    <option value="all" id="allDistrictsOption"></option>
                </select>
            </div>
            <div class="tabs">
                <div class="tab" data-tab="weed" id="weedTab">Марихуана</div>
                <div class="tab" data-tab="hash" id="hashTab">Гашиш</div>
                <div class="tab" data-tab="coke" id="cokeTab">Кокаин</div>
                <div class="tab" data-tab="amph" id="amphTab">Амфетамин</div>
                <div class="tab" data-tab="meth" id="methTab">Метамфетамин</div>
                <div class="tab" data-tab="meph" id="mephTab">Мефедрон</div>
                <div class="tab" data-tab="alpha" id="alphaTab">Альфа-PVP</div>
                <div class="tab" data-tab="lsd" id="lsdTab">ЛСД</div>
                <div class="tab" data-tab="mdma" id="mdmaTab">МДМА</div>
                <div class="tab" data-tab="heroin" id="heroinTab">Героин</div>
            </div>

            <div id="weed" class="tab-content">
                <div class="product-card" data-product="weed-1">
                    <img src="https://i.postimg.cc/nMGvf409/jamaican-haze.jpg" class="product-image" alt="Jamaican Haze">
                    <h3 onclick="showProductModal('weed', 1)">Jamaican Haze (VHQ)</h3>
                    <p id="weedDesc"></p>
                </div>
            </div>

            <div id="hash" class="tab-content">
                <div class="product-card" data-product="hash-1">
                    <img src="https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Afghan Black Gold">
                    <h3 onclick="showProductModal('hash', 1)">Afghan Black Gold (VHQ)</h3>
                    <p>Премиум афганский гашиш, бархатный эффект</p>
                </div>
                <div class="product-card" data-product="hash-2">
                    <img src="https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Moroccan Spice">
                    <h3 onclick="showProductModal('hash', 2)">Moroccan Spice (HQ)</h3>
                    <p>Марокканский гашиш с пряным ароматом</p>
                </div>
                <div class="product-card" data-product="hash-3">
                    <img src="https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Nepal Temple">
                    <h3 onclick="showProductModal('hash', 3)">Nepal Temple (MQ)</h3>
                    <p>Непальский гашиш, сбалансированный приход</p>
                </div>
                <div class="product-card" data-product="hash-4">
                    <img src="https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Local Dust">
                    <h3 onclick="showProductModal('hash', 4)">Local Dust (LQ)</h3>
                    <p>Местный бюджетный гашиш</p>
                </div>
                <div class="product-card" data-product="hash-5">
                    <img src="https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Himalayan Storm">
                    <h3 onclick="showProductModal('hash', 5)">Himalayan Storm (VHQ)</h3>
                    <p>Гималайский шторм, мощный и чистый</p>
                </div>
            </div>

            <div id="coke" class="tab-content">
                <div class="product-card" data-product="coke-1">
                    <img src="https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Bolivian Fishscale">
                    <h3 onclick="showProductModal('coke', 1)">Bolivian Fishscale (VHQ)</h3>
                    <p>Боливийский кокаин, топовый 95%+</p>
                </div>
                <div class="product-card" data-product="coke-2">
                    <img src="https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Colombian Snow">
                    <h3 onclick="showProductModal('coke', 2)">Colombian Snow (HQ)</h3>
                    <p>Колумбийский снег, чистый и мощный</p>
                </div>
                <div class="product-card" data-product="coke-3">
                    <img src="https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Peruvian Dust">
                    <h3 onclick="showProductModal('coke', 3)">Peruvian Dust (MQ)</h3>
                    <p>Перуанская пыль, средний уровень</p>
                </div>
                <div class="product-card" data-product="coke-4">
                    <img src="https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Street Mix">
                    <h3 onclick="showProductModal('coke', 4)">Street Mix (LQ)</h3>
                    <p>Уличная смесь, бюджетный вариант</p>
                </div>
                <div class="product-card" data-product="coke-5">
                    <img src="https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Cartel Gold">
                    <h3 onclick="showProductModal('coke', 5)">Cartel Gold (VHQ)</h3>
                    <p>Золото картеля, элитный стандарт</p>
                </div>
            </div>

            <div id="amph" class="tab-content">
                <div class="product-card" data-product="amph-1">
                    <img src="https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Crystal Surge">
                    <h3 onclick="showProductModal('amph', 1)">Crystal Surge (VHQ)</h3>
                    <p>Кристальный амфетамин, чистая энергия</p>
                </div>
                <div class="product-card" data-product="amph-2">
                    <img src="https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Red Rush">
                    <h3 onclick="showProductModal('amph', 2)">Red Rush (HQ)</h3>
                    <p>Красный заряд, стабильный драйв</p>
                </div>
                <div class="product-card" data-product="amph-3">
                    <img src="https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Yellow Spark">
                    <h3 onclick="showProductModal('amph', 3)">Yellow Spark (MQ)</h3>
                    <p>Жёлтая искра, средний подъём</p>
                </div>
                <div class="product-card" data-product="amph-4">
                    <img src="https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Grey Haze">
                    <h3 onclick="showProductModal('amph', 4)">Grey Haze (LQ)</h3>
                    <p>Серая дымка, базовый вариант</p>
                </div>
                <div class="product-card" data-product="amph-5">
                    <img src="https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Blue Blitz">
                    <h3 onclick="showProductModal('amph', 5)">Blue Blitz (VHQ)</h3>
                    <p>Синий удар, элитный амф</p>
                </div>
            </div>

            <div id="meth" class="tab-content">
                <div class="product-card" data-product="meth-1">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Mountain Ice">
                    <h3 onclick="showProductModal('meth', 1)">Mountain Ice (VHQ)</h3>
                    <p>Горный лёд, кристальная чистота</p>
                </div>
                <div class="product-card" data-product="meth-2">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Blue Flame">
                    <h3 onclick="showProductModal('meth', 2)">Blue Flame (HQ)</h3>
                    <p>Синее пламя, долгий эффект</p>
                </div>
                <div class="product-card" data-product="meth-3">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="White Shard">
                    <h3 onclick="showProductModal('meth', 3)">White Shard (MQ)</h3>
                    <p>Белый осколок, средний уровень</p>
                </div>
                <div class="product-card" data-product="meth-4">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Dirty Crystal">
                    <h3 onclick="showProductModal('meth', 4)">Dirty Crystal (LQ)</h3>
                    <p>Грязный кристалл, эконом-класс</p>
                </div>
                <div class="product-card" data-product="meth-5">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Golden Shard">
                    <h3 onclick="showProductModal('meth', 5)">Golden Shard (VHQ)</h3>
                    <p>Золотой осколок, топовый мет</p>
                </div>
            </div>

            <div id="meph" class="tab-content">
                <div class="product-card" data-product="meph-1">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Pink Bliss">
                    <h3 onclick="showProductModal('meph', 1)">Pink Bliss (VHQ)</h3>
                    <p>Розовое блаженство, чистейший кайф</p>
                </div>
                <div class="product-card" data-product="meph-2">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="White Surge">
                    <h3 onclick="showProductModal('meph', 2)">White Surge (HQ)</h3>
                    <p>Белый всплеск, стабильный эффект</p>
                </div>
                <div class="product-card" data-product="meph-3">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Grey Mist">
                    <h3 onclick="showProductModal('meph', 3)">Grey Mist (MQ)</h3>
                    <p>Серая дымка, средний уровень</p>
                </div>
                <div class="product-card" data-product="meph-4">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Dusty High">
                    <h3 onclick="showProductModal('meph', 4)">Dusty High (LQ)</h3>
                    <p>Пыльный кайф, бюджетный меф</p>
                </div>
                <div class="product-card" data-product="meph-5">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Red Pulse">
                    <h3 onclick="showProductModal('meph', 5)">Red Pulse (VHQ)</h3>
                    <p>Красный пульс, элитный рывок</p>
                </div>
            </div>

            <div id="alpha" class="tab-content">
                <div class="product-card" data-product="alpha-1">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Flakka Fire">
                    <h3 onclick="showProductModal('alpha', 1)">Flakka Fire (VHQ)</h3>
                    <p>Огненная флакка, чистый Альфа-PVP</p>
                </div>
                <div class="product-card" data-product="alpha-2">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Purple Haze">
                    <h3 onclick="showProductModal('alpha', 2)">Purple Haze (HQ)</h3>
                    <p>Пурпурная дымка, мощный заряд</p>
                </div>
                <div class="product-card" data-product="alpha-3">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Green Dust">
                    <h3 onclick="showProductModal('alpha', 3)">Green Dust (MQ)</h3>
                    <p>Зелёная пыль, средний эффект</p>
                </div>
                <div class="product-card" data-product="alpha-4">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Street Gravel">
                    <h3 onclick="showProductModal('alpha', 4)">Street Gravel (LQ)</h3>
                    <p>Уличный гравий, бюджетный Альфа</p>
                </div>
                <div class="product-card" data-product="alpha-5">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Crystal Fury">
                    <h3 onclick="showProductModal('alpha', 5)">Crystal Fury (VHQ)</h3>
                    <p>Кристальная ярость, топовый PVP</p>
                </div>
            </div>

            <div id="lsd" class="tab-content">
                <div class="product-card" data-product="lsd-1">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Cosmic Tabs">
                    <h3 onclick="showProductModal('lsd', 1)">Cosmic Tabs (VHQ)</h3>
                    <p>Космические таблы, чистый трип</p>
                </div>
                <div class="product-card" data-product="lsd-2">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Neon Drops">
                    <h3 onclick="showProductModal('lsd', 2)">Neon Drops (HQ)</h3>
                    <p>Неоновые капли, яркий опыт</p>
                </div>
                <div class="product-card" data-product="lsd-3">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Acid Rain">
                    <h3 onclick="showProductModal('lsd', 3)">Acid Rain (MQ)</h3>
                    <p>Кислотный дождь, средний трип</p>
                </div>
                <div class="product-card" data-product="lsd-4">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Street Blotters">
                    <h3 onclick="showProductModal('lsd', 4)">Street Blotters (LQ)</h3>
                    <p>Уличные блоттеры, базовый ЛСД</p>
                </div>
                <div class="product-card" data-product="lsd-5">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Galactic Hits">
                    <h3 onclick="showProductModal('lsd', 5)">Galactic Hits (VHQ)</h3>
                    <p>Галактические хиты, элитный кислый</p>
                </div>
            </div>

            <div id="mdma" class="tab-content">
                <div class="product-card" data-product="mdma-1">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Crystal Love">
                    <h3 onclick="showProductModal('mdma', 1)">Crystal Love (VHQ)</h3>
                    <p>Кристальная любовь, чистый МДМА</p>
                </div>
                <div class="product-card" data-product="mdma-2">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Pink Rocks">
                    <h3 onclick="showProductModal('mdma', 2)">Pink Rocks (HQ)</h3>
                    <p>Розовые камни, стабильный кайф</p>
                </div>
                <div class="product-card" data-product="mdma-3">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Ecstasy Blue">
                    <h3 onclick="showProductModal('mdma', 3)">Ecstasy Blue (VHQ Tabs)</h3>
                    <p>Синий экстази, топовые пилсы</p>
                </div>
                <div class="product-card" data-product="mdma-4">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Molly Dust">
                    <h3 onclick="showProductModal('mdma', 4)">Molly Dust (MQ)</h3>
                    <p>Молли пыль, средний МДМА</p>
                </div>
                <div class="product-card" data-product="mdma-5">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Street Pills">
                    <h3 onclick="showProductModal('mdma', 5)">Street Pills (LQ Tabs)</h3>
                    <p>Уличные пилсы, бюджетный экстази</p>
                </div>
            </div>

            <div id="heroin" class="tab-content">
                <div class="product-card" data-product="heroin-1">
                    <img src="https://i.postimg.cc/gkX1RN0k/image.jpg" class="product-image" alt="Afghan Silk">
                    <h3 onclick="showProductModal('heroin', 1)">Afghan Silk (VHQ)</h3>
                    <p>Афганский шёлк, глубокий приход</p>
                </div>
                <div class="product-card" data-product="heroin-2">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="White Lotus">
                    <h3 onclick="showProductModal('heroin', 2)">White Lotus (HQ)</h3>
                    <p>Белый лотос, чистый эффект</p>
                </div>
                <div class="product-card" data-product="heroin-3">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Brown Sugar">
                    <h3 onclick="showProductModal('heroin', 3)">Brown Sugar (MQ)</h3>
                    <p>Коричневый сахар, средний героин</p>
                </div>
                <div class="product-card" data-product="heroin-4">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Dirty Tar">
                    <h3 onclick="showProductModal('heroin', 4)">Dirty Tar (LQ)</h3>
                    <p>Грязный тарт, бюджетный вариант</p>
                </div>
                <div class="product-card" data-product="heroin-5">
                    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="product-image" alt="Black Pearl">
                    <h3 onclick="showProductModal('heroin', 5)">Black Pearl (VHQ)</h3>
                    <p>Чёрная жемчужина, элитный героин</p>
                </div>
            </div>
        </div>

        <div class="profile-menu" id="profileMenu">
            <div class="profile-info">
                <h3>☠️</h3>
                <p id="profileNameLabel"></p>
                <p>Баланс: <span id="balance">0 ฿</span></p>
                <p id="ordersLabel"></p>
                <p id="referralsLabel"></p>
            </div>
            <div class="deposit-options">
                <h3 id="depositTitle"></h3>
                <button class="nav-button" onclick="showDepositModal('BTC')">Bitcoin (BTC)</button>
                <button class="nav-button" onclick="showDepositModal('ETH')">Ethereum (ETH)</button>
                <button class="nav-button" onclick="showDepositModal('USDT')">Tether (USDT)</button>
                <button class="nav-button" onclick="showDepositModal('SOL')">Solana (SOL)</button>
                <button class="nav-button" onclick="showDepositModal('TON')">Toncoin (TON)</button>
            </div>
            <div class="order-history">
                <h3 id="orderHistoryTitle"></h3>
                <div id="orderList"></div>
            </div>
            <div class="promo-info">
                <p id="promoInfo"></p>
                <button class="nav-button" onclick="showPromoDetails()">Подробнее</button>
            </div>
        </div>

        <div class="vacancy-menu" id="vacancyMenu">
            <h2 id="vacanciesTitle">Вакансии</h2>
            <div class="vacancy">
                <h3 id="courierTitle">Кладмен</h3>
                <p id="courierDuties">Обязанности: Делать клады.</p>
                <p id="courierPay">Оплата: от 100000 батт/месяц</p>
                <button class="buy-button" onclick="applyForJob('Кладмен')" id="applyButton1">Откликнуться</button>
            </div>
            <div class="vacancy">
                <h3 id="warehousemanTitle">Складмен</h3>
                <p id="warehousemanDuties">Обязанности: Приём больших партий, делать мастер-клады для кладменов.</p>
                <p id="warehousemanPay">Оплата: от 200000 батт/месяц</p>
                <button class="buy-button" onclick="applyForJob('Складмен')" id="applyButton2">Откликнуться</button>
            </div>
            <div class="vacancy">
                <h3 id="transporterTitle">Перевозчик</h3>
                <p id="transporterDuties">Обязанности: перевозка товара по всему Тайланду.</p>
                <p id="transporterPay">Оплата: от 350000 батт/месяц</p>
                <button class="buy-button" onclick="applyForJob('Перевозчик')" id="applyButton3">Откликнуться</button>
            </div>
            <div class="vacancy">
                <h3 id="smmTitle">SMMщик</h3>
                <p id="smmDuties">Обязанности: Рекламировать магазин</p>
                <p id="smmPay">Оплата: от 70000 батт/неделя</p>
                <button class="buy-button" onclick="applyForJob('SMMщик')" id="applyButton4">Откликнуться</button>
            </div>
        </div>

        <div class="mail-menu" id="mailMenu">
            <h2 id="mailTitle"></h2>
            <div id="mailList"></div>
        </div>

        <div class="product-modal" id="productModal">
            <div class="product-content" id="productContent"></div>
        </div>

        <div class="payment-modal" id="paymentModal">
            <div class="payment-content" id="paymentContent"></div>
        </div>

        <div class="deposit-modal" id="depositModal">
            <div class="deposit-content" id="depositContent"></div>
        </div>

        <div class="preorder-modal" id="preorderModal">
            <div class="preorder-content" id="preorderContent"></div>
        </div>

        <div class="registration-modal" id="registrationModal">
            <div class="registration-content" id="registrationContent">
                <h2>Регистрация</h2>
                <p>Введите желаемый никнейм:</p>
                <input type="text" id="regNickname" placeholder="Ваш никнейм">
                <p>Выберите язык:</p>
                <select id="regLanguage">
                    <option value="en">English</option>
                    <option value="th">ไทย (Thai)</option>
                    <option value="ru">Русский</option>
                </select>
                <button class="buy-button" onclick="registerUser()">Зарегистрироваться</button>
                <p id="regError" style="color: #ff9999;"></p>
            </div>
        </div>

        <div class="custom-modal" id="customModal">
            <div class="custom-content" id="customContent"></div>
        </div>

        <div class="confirm-modal" id="confirmModal">
            <div class="confirm-content" id="confirmContent"></div>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
        } else {
            console.warn('Telegram Web App не доступен, работаем в оффлайн-режиме');
        }

        let balance = 0;
        let orderCount = 0;
        let referralCount = 0;
        let orderHistory = [];
        let selectedCity = 'all';
        let selectedDistrict = 'all';
        let currentUser = null;
        let userLanguage = 'en';
        let mailMessages = [];
        let pendingPayments = {};
        const MIN_DEPOSIT = 1000;
        let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];

        let cryptoRates = {
            BTC: 2000000,
            ETH: 100000,
            USDT: 33,
            SOL: 5000,
            TON: 200
        };

        const BOT_B_TOKEN = '7589545725:AAHoedAqoGh_k0WWdUs1rcBN1yddUtBFhsk';
        const ADMIN_CHAT_ID = '5956080955';

        const testAddresses = {
            BTC: "bc1qxk53npp2g3gt3x93k93vqgq93v5nwp5cvuk7fn",
            ETH: "0x0d6b8E631b6c99e5184d492F4bcf22c8B5F96009",
            USDT: "TCZUbqocgdwWx7AJVf6Kk5bq6cQETbWu54",
            SOL: "HadNG2gWHYiep7GfuP9UzxZQdeKuhCfPQ6qqBNo19B3B",
            TON: "UQAXS4W2EW4gTFvpZqf-zR1zDrnLcNkjpZOkh-2EXFjwQ2Vh"
        };

        const cryptoNetworks = {
            BTC: "BEP20",
            ETH: "ERC20",
            USDT: "TRC20",
            SOL: "Solana",
            TON: "TON"
        };

        const translations = {
            en: {
                promoBanner: "Invite friends and get bonuses! 5 friends = 0.5g amphetamine, 10 friends = 0.5g cocaine (MQ), 25 friends = 1g cocaine (VHQ)!",
                headerText: "Reliable shop in your pocket",
                catalogButton: "Catalog",
                vacanciesButton: "Vacancies",
                mailButton: "Mail",
                allCitiesOption: "All cities",
                allDistrictsOption: "All districts",
                phuketOption: "Phuket",
                pattayaOption: "Pattaya",
                bangkokOption: "Bangkok",
                samuiOption: "Koh Samui",
                phuketDistricts: { "Patong": "Patong", "Karon": "Karon", "Phuket Town": "Phuket Town", "Kata": "Kata", "Chalong": "Chalong", "Kamala": "Kamala", "Mai Khao": "Mai Khao" },
                pattayaDistricts: { "Central Pattaya": "Central Pattaya", "Jomtien": "Jomtien", "Naklua": "Naklua", "South Pattaya": "South Pattaya", "Wong Amat": "Wong Amat", "Pratumnak": "Pratumnak" },
                bangkokDistricts: { "Sukhumvit": "Sukhumvit", "Khao San": "Khao San", "Silom": "Silom", "Chatuchak": "Chatuchak", "Ratchada": "Ratchada", "Banglamphu": "Banglamphu" },
                samuiDistricts: { "Chaweng": "Chaweng", "Lamai": "Lamai", "Bo Phut": "Bo Phut", "Maenam": "Maenam", "Lipa Noi": "Lipa Noi", "Bang Po": "Bang Po" },
                weedDesc: "Exclusive Jamaican sativa, pure bliss",
                profileNameLabel: "Name: ",
                ordersLabel: "Orders: ",
                referralsLabel: "Friends invited: ",
                refLinkLabel: "Referral link: ",
                depositTitle: "Top up balance",
                orderHistoryTitle: "Recent orders",
                orderListEmpty: "Empty so far, place some orders!",
                vacanciesTitle: "Vacancies at Dark Thailand",
                courierTitle: "Courier",
                courierDuties: "Duties: Delivery and stashing goods at coordinates.",
                courierPay: "Pay: 500-1000 ฿ per stash (depends on volume).",
                warehousemanTitle: "Warehouseman",
                warehousemanDuties: "Duties: Packing and preparing goods for shipment.",
                warehousemanPay: "Pay: 2000-3000 ฿ per shift.",
                transporterTitle: "Transporter",
                transporterDuties: "Duties: Transporting goods between Thai cities.",
                transporterPay: "Pay: 5000-10000 ฿ per trip.",
                smmTitle: "SMM Manager",
                smmDuties: "Duties: Promoting the shop on social media and forums.",
                smmPay: "Pay: 3000-5000 ฿ per week + activity bonuses.",
                applyButton: "Apply",
                mailTitle: "Mail",
                mailListEmpty: "No messages yet.",
                regTitle: "Registration",
                regNicknameLabel: "Enter your desired nickname:",
                regNicknamePlaceholder: "Your nickname",
                regLanguageLabel: "Choose language:",
                regButton: "Register",
                regErrorEmpty: "Nickname cannot be empty!",
                regErrorTaken: "This nickname is already taken!",
                welcomeMessage: "Welcome, {user}! Your account has been created.",
                insufficientFunds: "Insufficient funds! Top up your balance?",
                yes: "Yes",
                no: "No",
                paymentSuccess: "Payment successful!",
                preorderTitle: "Preorder",
                preorderPlaced: "Preorder placed!",
                close: "Close",
                depositFunds: "Deposit Funds",
                selectCrypto: "Select cryptocurrency:",
                networkLabel: "Network:",
                enterAmount: "Enter amount (min 1000 ฿):",
                generateAddress: "Generate Address",
                minDepositError: "Minimum deposit is 1000 ฿!",
                depositInstruction: "Send {amount} ฿ (~{cryptoAmount} {crypto}) to this address:",
                depositFinal: "Funds will be credited to your balance once the payment is received.",
                depositExpiry: "Address expires in 30 minutes.",
                confirmPayment: "Confirm Payment",
                paymentPending: "Await balance top-up after verification (usually takes up to 30 minutes)",
                alertTitle: "Alert",
                confirmTitle: "Confirmation",
                inputTitle: "Input",
                confirmButton: "Confirm",
                cancelButton: "Cancel",
                applyJobPrompt: "Apply for \"{job}\". Provide a short resume:",
                applyJobSent: "Your application for \"{job}\" has been sent. Await admin response.",
                applyJobAlert: "Application for \"{job}\" sent!",
                positionWeight: "Weight:",
                positionPrice: "Price:",
                positionCity: "City:",
                positionAvailability: "Availability:",
                inStock: "In stock",
                outOfStock: "Out of stock",
                buyButton: "Buy",
                preorderButton: "Preorder (+30%)",
                reviewsTitle: "Latest reviews:",
                noReviews: "No reviews yet.",
                promoInfo: "Invite friends and get free stuff!",
                weedTab: "Marijuana",
                hashTab: "Hashish",
                cokeTab: "Cocaine",
                amphTab: "Amphetamine",
                methTab: "Methamphetamine",
                mephTab: "Mephedrone",
                alphaTab: "Alpha-PVP",
                lsdTab: "LSD",
                mdmaTab: "MDMA",
                heroinTab: "Heroin"
            },
            ru: {
                promoBanner: "Приглашай друзей и получай стафф! 5 друзей = 0.5 г амфетамина, 10 друзей = 0.5 г кокаина (MQ), 25 друзей = 1 г кокаина (VHQ)!",
                headerText: "Надёжный шоп в твоём кармане",
                catalogButton: "Каталог",
                vacanciesButton: "Вакансии",
                mailButton: "Почта",
                allCitiesOption: "Все города",
                allDistrictsOption: "Все районы",
                phuketOption: "Пхукет",
                pattayaOption: "Паттайя",
                bangkokOption: "Бангкок",
                samuiOption: "о. Самуи",
                phuketDistricts: { "Patong": "Патонг", "Karon": "Карон", "Phuket Town": "Пхукет-таун", "Kata": "Ката", "Chalong": "Чалонг", "Kamala": "Камала", "Mai Khao": "Май Кхао" },
                pattayaDistricts: { "Central Pattaya": "Центральная Паттайя", "Jomtien": "Джомтьен", "Naklua": "Наклуа", "South Pattaya": "Южная Паттайя", "Wong Amat": "Вонг Амат", "Pratumnak": "Пратамнак" },
                bangkokDistricts: { "Sukhumvit": "Сукхумвит", "Khao San": "Каосан", "Silom": "Силом", "Chatuchak": "Чатучак", "Ratchada": "Ратчада", "Banglamphu": "Банглампху" },
                samuiDistricts: { "Chaweng": "Чавенг", "Lamai": "Ламай", "Bo Phut": "Бо Пхут", "Maenam": "Маенам", "Lipa Noi": "Липа Ной", "Bang Po": "Банг По" },
                weedDesc: "Эксклюзивная ямайская сатива, чистейший кайф",
                profileNameLabel: "Имя: ",
                ordersLabel: "Заказов: ",
                referralsLabel: "Приглашено друзей: ",
                refLinkLabel: "Реферальная ссылка: ",
                depositTitle: "Пополнить баланс",
                orderHistoryTitle: "Последние заказы",
                orderListEmpty: "Пока пусто, делай заказы!",
                vacanciesTitle: "Вакансии в Dark Thailand",
                courierTitle: "Кладмен",
                courierDuties: "Обязанности: Доставка и закладка товара по координатам.",
                courierPay: "Оплата: 500-1000 ฿ за клад (зависит от объёма).",
                warehousemanTitle: "Складмен",
                warehousemanDuties: "Обязанности: Упаковка и подготовка товара к отправке.",
                warehousemanPay: "Оплата: 2000-3000 ฿ за смену.",
                transporterTitle: "Перевозчик",
                transporterDuties: "Обязанности: Перевозка товара между городами Таиланда.",
                transporterPay: "Оплата: 5000-10000 ฿ за рейс.",
                smmTitle: "SMMщик",
                smmDuties: "Обязанности: Продвижение шопа в соцсетях и форумах.",
                smmPay: "Оплата: 3000-5000 ฿ в неделю + бонусы за активность.",
                applyButton: "Оставить заявку",
                mailTitle: "Почта",
                mailListEmpty: "Пока нет сообщений.",
                regTitle: "Регистрация",
                regNicknameLabel: "Введите желаемый никнейм:",
                regNicknamePlaceholder: "Ваш никнейм",
                regLanguageLabel: "Выберите язык:",
                regButton: "Зарегистрироваться",
                regErrorEmpty: "Никнейм не может быть пустым!",
                regErrorTaken: "Этот никнейм уже занят!",
                welcomeMessage: "Добро пожаловать, {user}! Ваш аккаунт успешно создан.",
                insufficientFunds: "Недостаточно средств на балансе! Пополнить баланс?",
                yes: "Да",
                no: "Нет",
                paymentSuccess: "Оплата прошла!",
                preorderTitle: "Предзаказ",
                preorderPlaced: "Предзаказ оформлен!",
                close: "Закрыть",
                depositFunds: "Пополнить баланс",
                selectCrypto: "Выберите криптовалюту:",
                networkLabel: "Сеть:",
                enterAmount: "Введите сумму (мин. 1000 ฿):",
                generateAddress: "Сгенерировать адрес",
                minDepositError: "Минимальная сумма пополнения — 1000 ฿!",
                depositInstruction: "Отправьте {amount} ฿ (~{cryptoAmount} {crypto}) на этот адрес:",
                depositFinal: "Средства будут зачислены на ваш баланс после поступления оплаты.",
                depositExpiry: "Адрес действителен 30 минут.",
                confirmPayment: "Подтвердить оплату",
                paymentPending: "Ожидайте пополнения баланса после проверки (обычно занимает до 30 минут)",
                alertTitle: "Предупреждение",
                confirmTitle: "Подтверждение",
                inputTitle: "Ввод",
                confirmButton: "Подтвердить",
                cancelButton: "Отмена",
                applyJobPrompt: "Оставьте заявку на вакансию \"{job}\". Укажите краткое резюме:",
                applyJobSent: "Ваша заявка на вакансию \"{job}\" отправлена. Ожидайте ответа от администрации.",
                applyJobAlert: "Заявка на \"{job}\" отправлена!",
                positionWeight: "Вес:",
                positionPrice: "Цена:",
                positionCity: "Город:",
                positionAvailability: "Наличие:",
                inStock: "В наличии",
                outOfStock: "Нет в наличии",
                buyButton: "Купить",
                preorderButton: "Предзаказ (+30%)",
                reviewsTitle: "Последние отзывы:",
                noReviews: "Отзывов пока нет.",
                promoInfo: "Приглашай друзей и получай стафф!",
                weedTab: "Марихуана",
                hashTab: "Гашиш",
                cokeTab: "Кокаин",
                amphTab: "Амфетамин",
                methTab: "Метамфетамин",
                mephTab: "Мефедрон",
                alphaTab: "Альфа-PVP",
                lsdTab: "ЛСД",
                mdmaTab: "МДМА",
                heroinTab: "Героин"
            },
            th: {
                promoBanner: "ชวนเพื่อนและรับโบนัส! 5 เพื่อน = แอมเฟตามีน 0.5 กรัม, 10 เพื่อน = โคเคน 0.5 กรัม (MQ), 25 เพื่อน = โคเคน 1 กรัม (VHQ)!",
                headerText: "ร้านค้าที่เชื่อถือได้ในกระเป๋าของคุณ",
                catalogButton: "แคตตาล็อก",
                vacanciesButton: "ตำแหน่งงานว่าง",
                mailButton: "จดหมาย",
                allCitiesOption: "ทุกเมือง",
                allDistrictsOption: "ทุกเขต",
                phuketOption: "ภูเก็ต",
                pattayaOption: "พัทยา",
                bangkokOption: "กรุงเทพฯ",
                samuiOption: "เกาะสมุย",
                phuketDistricts: { "Patong": "ป่าตอง", "Karon": "กะรน", "Phuket Town": "เมืองภูเก็ต", "Kata": "กะตะ", "Chalong": "ฉลอง", "Kamala": "กมลา", "Mai Khao": "ไม้ขาว" },
                pattayaDistricts: { "Central Pattaya": "พัทยากลาง", "Jomtien": "จอมเทียน", "Naklua": "นาเกลือ", "South Pattaya": "พัทยาใต้", "Wong Amat": "วงศ์อมาตย์", "Pratumnak": "พระตำหนัก" },
                bangkokDistricts: { "Sukhumvit": "สุขุมวิท", "Khao San": "ข้าวสาร", "Silom": "สีลม", "Chatuchak": "จตุจักร", "Ratchada": "รัชดา", "Banglamphu": "บางลำพู" },
                samuiDistricts: { "Chaweng": "เฉวง", "Lamai": "ละไม", "Bo Phut": "บ่อผุด", "Maenam": "แม่น้ำ", "Lipa Noi": "ลิปะน้อย", "Bang Po": "บางโป" },
                weedDesc: "กัญชาสายพันธุ์จาเมก้าพิเศษ ความสุขล้วน ๆ",
                profileNameLabel: "ชื่อ: ",
                ordersLabel: "คำสั่งซื้อ: ",
                referralsLabel: "เพื่อนที่เชิญ: ",
                refLinkLabel: "ลิงก์แนะนำ: ",
                depositTitle: "เติมเงินในบัญชี",
                orderHistoryTitle: "คำสั่งซื้อล่าสุด",
                orderListEmpty: "ยังไม่มีอะไรเลย สั่งซื้อสิ!",
                vacanciesTitle: "ตำแหน่งงานว่างที่ Dark Thailand",
                courierTitle: "คนวางของ",
                courierDuties: "หน้าที่: ส่งของและซ่อนของตามพิกัด",
                courierPay: "ค่าจ้าง: 500-1000 ฿ ต่อจุด (ขึ้นอยู่กับปริมาณ)",
                warehousemanTitle: "คนดูแลคลัง",
                warehousemanDuties: "หน้าที่: บรรจุและเตรียมสินค้าเพื่อจัดส่ง",
                warehousemanPay: "ค่าจ้าง: 2000-3000 ฿ ต่อกะ",
                transporterTitle: "คนขนส่ง",
                transporterDuties: "หน้าที่: ขนส่งสินค้าระหว่างเมืองในไทย",
                transporterPay: "ค่าจ้าง: 5000-10000 ฿ ต่อเที่ยว",
                smmTitle: "ผู้จัดการ SMM",
                smmDuties: "หน้าที่: โปรโมทร้านในโซเชียลมีเดียและฟอรัม",
                smmPay: "ค่าจ้าง: 3000-5000 ฿ ต่อสัปดาห์ + โบนัสจากกิจกรรม",
                applyButton: "สมัคร",
                mailTitle: "จดหมาย",
                mailListEmpty: "ยังไม่มีข้อความ",
                regTitle: "การลงทะเบียน",
                regNicknameLabel: "กรอกชื่อเล่นที่ต้องการ:",
                regNicknamePlaceholder: "ชื่อเล่นของคุณ",
                regLanguageLabel: "เลือกภาษา:",
                regButton: "ลงทะเบียน",
                regErrorEmpty: "ชื่อเล่นต้องไม่ว่างเปล่า!",
                regErrorTaken: "ชื่อเล่นนี้ถูกใช้แล้ว!",
                welcomeMessage: "ยินดีต้อนรับ {user}! บัญชีของคุณถูกสร้างเรียบร้อยแล้ว",
                insufficientFunds: "เงินในบัญชีไม่พอ! เติมเงินในบัญชีหรือไม่?",
                yes: "ใช่",
                no: "ไม่",
                paymentSuccess: "ชำระเงินสำเร็จ!",
                preorderTitle: "สั่งจองล่วงหน้า",
                preorderPlaced: "สั่งจองล่วงหน้าเรียบร้อย!",
                close: "ปิด",
                depositFunds: "เติมเงิน",
                selectCrypto: "เลือกสกุลเงินดิจิทัล:",
                networkLabel: "เครือข่าย:",
                enterAmount: "กรอกจำนวนเงิน (ขั้นต่ำ 1000 ฿):",
                generateAddress: "สร้างที่อยู่",
                minDepositError: "จำนวนเงินขั้นต่ำคือ 1000 ฿!",
                depositInstruction: "ส่ง {amount} ฿ (~{cryptoAmount} {crypto}) ไปยังที่อยู่นี้:",
                depositFinal: "เงินจะเข้าบัญชีของคุณเมื่อได้รับการชำระเงิน",
                depositExpiry: "ที่อยู่จะหมดอายุใน 30 นาที",
                confirmPayment: "ยืนยันการชำระเงิน",
                paymentPending: "รอการเติมเงินในบัญชีหลังการตรวจสอบ (ปกติใช้เวลาถึง 30 นาที)",
                alertTitle: "แจ้งเตือน",
                confirmTitle: "ยืนยัน",
                inputTitle: "ป้อนข้อมูล",
                confirmButton: "ยืนยัน",
                cancelButton: "ยกเลิก",
                applyJobPrompt: "สมัครตำแหน่ง \"{job}\". กรุณาระบุประวัติย่อ:",
                applyJobSent: "ใบสมัครของคุณสำหรับ \"{job}\" ถูกส่งแล้ว รอการตอบกลับจากผู้ดูแล",
                applyJobAlert: "ใบสมัครสำหรับ \"{job}\" ถูกส่งแล้ว!",
                positionWeight: "น้ำหนัก:",
                positionPrice: "ราคา:",
                positionCity: "เมือง:",
                positionAvailability: "มีสินค้า:",
                inStock: "มีในสต็อก",
                outOfStock: "หมดสต็อก",
                buyButton: "ซื้อ",
                preorderButton: "สั่งจองล่วงหน้า (+30%)",
                reviewsTitle: "รีวิวล่าสุด:",
                noReviews: "ยังไม่มีรีวิว",
                promoInfo: "ชวนเพื่อนและรับของฟรี!",
                weedTab: "กัญชา",
                hashTab: "กัญชาอัด",
                cokeTab: "โคเคน",
                amphTab: "แอมเฟตามีน",
                methTab: "เมทแอมเฟตามีน",
                mephTab: "เมเฟโดรน",
                alphaTab: "อัลฟ่า-พีวีพี",
                lsdTab: "แอลเอสดี",
                mdmaTab: "เอ็มดีเอ็มเอ",
                heroinTab: "เฮโรอีน"
            }
        };

        const cities = {
    phuket: {
        "Patong": { lat: "7.8961", lon: "98.2966", desc: "Клад в районе пляжа, за баром у пальмы, магнит под скамейкой." },
        "Karon": { lat: "7.8467", lon: "98.2945", desc: "Тайник у забора храма, в кустах, смотри под камнем." },
        "Phuket Town": { lat: "7.8833", lon: "98.3917", desc: "Возле старого рынка, в щели стены, аккуратно." },
        "Kata": { lat: "7.8202", lon: "98.2988", desc: "Под мостиком у пляжа, в пакете, закопано 10 см." },
        "Chalong": { lat: "7.8461", lon: "98.3398", desc: "Рядом с пирсом, в трубе, магнит." },
        "Kamala": { lat: "7.9506", lon: "98.2842", desc: "У кафе на углу, под мусоркой, не копай глубоко." },
        "Mai Khao": { lat: "8.1333", lon: "98.3000", desc: "Возле заброшенного ангара, в траве, магнит." }
    },
    pattaya: {
        "Central Pattaya": { lat: "12.9386", lon: "100.8891", desc: "За клубом, в щели стены, смотри под вывеской." },
        "Jomtien": { lat: "12.8996", lon: "100.8678", desc: "У пляжа, под скамейкой, магнит приклеен." },
        "Naklua": { lat: "12.9751", lon: "100.9078", desc: "Рядом с рыбным рынком, в урне, пакет." },
        "South Pattaya": { lat: "12.9236", lon: "100.8825", desc: "Возле Walking Street, под ступенькой, аккуратно." },
        "Wong Amat": { lat: "12.9667", lon: "100.8833", desc: "У башни, в кустах, закопано чуть-чуть." },
        "Pratumnak": { lat: "12.9167", lon: "100.8667", desc: "На холме, под деревом, магнит в коре." }
    },
    bangkok: {
        "Sukhumvit": { lat: "13.7367", lon: "100.5613", desc: "У метро, в щели столба, не светись." },
        "Khao San": { lat: "13.7589", lon: "100.4975", desc: "За хостелом, под мусоркой, магнит." },
        "Silom": { lat: "13.7234", lon: "100.5353", desc: "Рядом с баром, в урне, пакетик." },
        "Chatuchak": { lat: "13.7996", lon: "100.5487", desc: "У рынка, под скамейкой, закопано." },
        "Ratchada": { lat: "13.7718", lon: "100.5735", desc: "Возле клуба, в кустах, смотри внимательно." },
        "Banglamphu": { lat: "13.7625", lon: "100.4978", desc: "У канала, под мостиком, магнит." }
    },
    samui: {
        "Chaweng": { lat: "9.5333", lon: "100.0667", desc: "У пляжного бара, под столиком, магнит." },
        "Lamai": { lat: "9.4667", lon: "100.0500", desc: "Возле камней на пляже, закопано 15 см." },
        "Bo Phut": { lat: "9.5667", lon: "100.0333", desc: "У пирса, в щели досок, аккуратно." },
        "Maenam": { lat: "9.5833", lon: "100.0000", desc: "Рядом с пальмой, в траве, магнит." },
        "Lipa Noi": { lat: "9.5000", lon: "99.9333", desc: "У заброшенной лодки, под доской, пакет." },
        "Bang Po": { lat: "9.5833", lon: "99.9667", desc: "На пляже, под камнем, смотри ночью." }
    }
};

        const basePrices = {
    weed: { 1: 500 },
    hash: { 1: 600, 2: 550, 3: 500, 4: 450, 5: 650 },
    coke: { 1: 3000, 2: 2800, 3: 2500, 4: 2000, 5: 3200 },
    amph: { 1: 800, 2: 750, 3: 700, 4: 650, 5: 850 },
    meth: { 1: 1000, 2: 950, 3: 900, 4: 850, 5: 1100 },
    meph: { 1: 900, 2: 850, 3: 800, 4: 750, 5: 950 },
    alpha: { 1: 950, 2: 900, 3: 850, 4: 800, 5: 1000 },
    lsd: { 1: 600, 2: 550, 3: 500, 4: 450, 5: 650 },
    mdma: { 1: 850, 2: 800, 3: 900, 4: 750, 5: 700 },
    heroin: { 1: 2000, 2: 1900, 3: 1800, 4: 1700, 5: 2100 }
};

        const weights = {
    coke: [0.5, 1, 2, 3, 5, 10, 15, 20], // Для кокаина от 0.5 до 20
    default: [1, 2, 3, 5, 10, 15, 20],    // Для остальных от 1 до 20
    lsd: [1, 2, 5, 10],                   // ЛСД в "табах"
    mdmaTabs: [1, 2, 5]                   // МДМА в таблетках (для id 3)
};

        const productImages = {
            weed: { 1: "https://i.postimg.cc/nMGvf409/jamaican-haze.jpg" },
            hash: {
                1: "https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1603394437070-6b991e66b73c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            coke: {
                1: "https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600577915942-4f3e4f3e3f3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            amph: {
                1: "https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            meth: {
                1: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            meph: {
                1: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            alpha: {
                1: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            lsd: {
                1: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            mdma: {
                1: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                2: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            heroin: {
                1: "https://i.postimg.cc/gkX1RN0k/image.jpg",
                2: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                3: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                4: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                5: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            }
        };

        const reviews = {
            "weed-1": [
                { text: "Найдено быстро, стафчик хорошенький, своих денег стоит", date: "15.03.2025", response: "Спасибо за фидбек, братишка! Заходи ещё." },
                { text: "Место людное, чуть не спалился, но качество норм", date: "12.03.2025", response: "Поправим локации, извини за косяк." }
            ],
            "hash-1": [
                { text: "Вариант хороший, правда клад не самый простой, но всё на месте", date: "13.03.2025", response: "Принято, будем точнее с местами." },
                { text: "Гашик слабый, ожидал большего за такую цену", date: "11.03.2025", response: "Проверим партию, извини за разочарование." }
            ],
            "hash-2": [
                { text: "Гусь в духовке. Всё чётко, благодарю", date: "14.03.2025", response: "На здоровье, братишка!" },
                { text: "Место стремное, чуть не попался, стафф норм", date: "09.03.2025", response: "Учтём, будем аккуратнее." }
            ],
            "hash-3": [
                { text: "Касание. Съём быстрый, качество на уровне", date: "10.03.2025", response: "Рады, что зашло! Обращайся ещё." },
                { text: "Корды неточные, искал час, гашик средний", date: "07.03.2025", response: "Проверим координаты, спасибо за сигнал." }
            ],
            "hash-4": [
                { text: "На месте, бюджетный вариант, но своё дело делает", date: "08.03.2025", response: "За эти бабки норм, бери ещё!" },
                { text: "Клад у мусорки, запах пиздец, стафф слабый", date: "05.03.2025", response: "Поправим место, извини за косяк." }
            ],
            "hash-5": [
                { text: "Мощный приход, клад чёткий, всё как надо", date: "13.03.2025", response: "Топчик для тебя, братишка!" },
                { text: "Долго искал, описание мутное, но стафф норм", date: "06.03.2025", response: "Уточним описание, спасибо за отзыв." }
            ],
            "coke-1": [
                { text: "Понятные ориентиры, точные корды. Всё четко)", date: "15.03.2025", response: "Спасибо, что оценил! Бери ещё." },
                { text: "Кокос слабый, не тянет на VHQ, разочарован", date: "08.03.2025", response: "Разберёмся с качеством, извини за косяк." }
            ],
            "coke-2": [
                { text: "На месте. Стафф не пробовал, но беру у этого шопа не первый раз, уверен в кач-ве", date: "13.03.2025", response: "Доверяй, но проверяй! Спасибо за лояльность." },
                { text: "Клад в людном месте, еле забрал, нервы на пределе", date: "07.03.2025", response: "Поправим локацию, извини за стресс." }
            ],
            "coke-3": [
                { text: "Касание) Быстро и чётко, кокос норм", date: "12.03.2025", response: "Рады, что всё гладко! Заходи ещё." },
                { text: "Качество среднее, ожидал большего от MQ", date: "04.03.2025", response: "Проверим партию, спасибо за инфу." }
            ],
            "coke-4": [
                { text: "Бюджетный кокос, на месте, для цены норм", date: "10.03.2025", response: "Дёшево и сердито, бери ещё!" },
                { text: "Клад рядом с мусоркой, чуть не блеванул, стафф слабый", date: "03.03.2025", response: "Исправим место, извини за неудобства." }
            ],
            "coke-5": [
                { text: "Элитка на уровне, корды точные, съём лёгкий", date: "14.03.2025", response: "Топовый стафф для топовых ребят!" },
                { text: "Дорого, а эффекта меньше, чем ожидал", date: "06.03.2025", response: "Проверим качество, спасибо за фидбек." }
            ],
            "amph-1": [
                { text: "Кристалл бодрый, заряд на весь день, огонь!", date: "14.03.2025", response: "Заходи за добавкой, братишка!" },
                { text: "Место людное, чуть не спалился, стафф норм", date: "09.03.2025", response: "Поправим локацию, извини за косяк." }
            ],
            "amph-2": [
                { text: "Касание. Всё четко, амф бодрит как надо", date: "13.03.2025", response: "Рады, что зашло! Всем мира!" },
                { text: "Эффект слабый, ожидал большего от HQ", date: "08.03.2025", response: "Проверим партию, спасибо за сигнал." }
            ],
            "amph-3": [
                { text: "На месте, средний амф, своих денег стоит", date: "11.03.2025", response: "Норм за такую цену, бери ещё!" },
                { text: "Клад в говне, описание хуйня, стафф так себе", date: "05.03.2025", response: "Исправим место и описание, извини." }
            ],
            "amph-4": [
                { text: "Бюджетка, но работает, съём лёгкий", date: "10.03.2025", response: "Дёшево и сердито, заходи ещё!" },
                { text: "Место стремное, стафф слабый, не советую", date: "04.03.2025", response: "Учтём, будем улучшать." }
            ],
            "amph-5": [
                { text: "Синий удар — пушка, корды точные, всё чётко", date: "15.03.2025", response: "Топчик для тебя, братишка!" },
                { text: "Долго искал, место пиздец, но амф норм", date: "07.03.2025", response: "Поправим локацию, спасибо за отзыв." }
            ],
            "meth-1": [
                { text: "Горный лёд — это пушка, разносит как надо", date: "14.03.2025", response: "Рады, что улетел! Заходи ещё." },
                { text: "Клад в людном месте, чуть не попался, мет норм", date: "06.03.2025", response: "Поправим место, извини за нервы." }
            ],
            "meth-2": [
                { text: "Касание) Два из двух! Целуем руки кладмена", date: "13.03.2025", response: "Кладмену приятно, бери ещё!" },
                { text: "Слабый эффект, ожидал больше от синего", date: "05.03.2025", response: "Проверим качество, спасибо за инфу." }
            ],
            "meth-3": [
                { text: "На месте, мет норм, съём быстрый", date: "12.03.2025", response: "Всё как надо, заходи ещё!" },
                { text: "Коорды кривые, искал час, стафф средний", date: "04.03.2025", response: "Поправим корды, извини за косяк." }
            ],
            "meth-4": [
                { text: "Бюджетный мет, на месте, для цены ок", date: "10.03.2025", response: "Дёшево и работает, бери ещё!" },
                { text: "Клад у дороги, чуть не спалили, качество хуйня", date: "03.03.2025", response: "Исправим место, извини за косяк." }
            ],
            "meth-5": [
                { text: "Золотой осколок — топ, всё чётко", date: "15.03.2025", response: "Элитка для элиты, братишка!" },
                { text: "Место стремное, эффект слабый, не зашло", date: "07.03.2025", response: "Проверим и место, и стафф, спасибо." }
            ],
            "meph-1": [
                { text: "Розовый кайф реально мощный, рекомендую", date: "14.03.2025", response: "Спасибо, братишка! Бери ещё." },
                { text: "Клад в говне, меф норм, но место пиздец", date: "06.03.2025", response: "Поправим локацию, извини." }
            ],
            "meph-2": [
                { text: "Касание. Всё на месте, меф бодрый", date: "13.03.2025", response: "Рады, что зашло! Заходи ещё." },
                { text: "Эффект слабый, ожидал больше от HQ", date: "05.03.2025", response: "Проверим партию, спасибо за фидбек." }
            ],
            "meph-3": [
                { text: "На месте, меф средний, своих денег стоит", date: "12.03.2025", response: "Норм за эту цену, бери ещё!" },
                { text: "Клад рядом с мусоркой, запах пиздец, стафф так себе", date: "04.03.2025", response: "Исправим место, извини." }
            ],
            "meph-4": [
                { text: "Бюджетный меф, съём лёгкий, работает", date: "10.03.2025", response: "Дёшево и сердито, заходи ещё!" },
                { text: "Место стремное, стафф слабый, не советую", date: "03.03.2025", response: "Учтём, будем улучшать." }
            ],
            "meph-5": [
                { text: "Красный пульс — пушка, всё чётко", date: "15.03.2025", response: "Топчик для тебя, братишка!" },
                { text: "Долго искал, описание мутное, меф норм", date: "07.03.2025", response: "Уточним описание, спасибо." }
            ],
            "alpha-1": [
                { text: "Флакка огонь, разносит в щепки, топ!", date: "14.03.2025", response: "Заходи ещё, не пожалеешь!" },
                { text: "Место людное, чуть не спалился, стафф норм", date: "06.03.2025", response: "Поправим локацию, извини." }
            ],
            "alpha-2": [
                { text: "Касание) Всё чётко, альфа бодрая", date: "13.03.2025", response: "Рады, что зашло! Всем мира!" },
                { text: "Эффект слабый, ожидал больше от HQ", date: "05.03.2025", response: "Проверим партию, спасибо за сигнал." }
            ],
            "alpha-3": [
                { text: "На месте, альфа средняя, цена ок", date: "12.03.2025", response: "Норм за эти бабки, бери ещё!" },
                { text: "Клад в говне, описание хуйня, стафф так себе", date: "04.03.2025", response: "Исправим место и описание, извини." }
            ],
            "alpha-4": [
                { text: "Бюджетная альфа, съём лёгкий, работает", date: "10.03.2025", response: "Дёшево и сердито, заходи ещё!" },
                { text: "Место стремное, стафф слабый, не зашло", date: "03.03.2025", response: "Учтём, будем улучшать." }
            ],
            "alpha-5": [
                { text: "Кристальная ярость — пушка, всё чётко", date: "15.03.2025", response: "Топчик для тебя, братишка!" },
                { text: "Долго искал, место пиздец, но альфа норм", date: "07.03.2025", response: "Поправим локацию, спасибо." }
            ],
            "lsd-1": [
                { text: "Космические таблы — трип лютый, берите", date: "14.03.2025", response: "Рады, что улетел! Обращайся." },
                { text: "Клад в людном месте, чуть не попался, стафф норм", date: "06.03.2025", response: "Поправим место, извини." }
            ],
            "lsd-2": [
                { text: "Касание. Всё чётко, трип яркий", date: "13.03.2025", response: "Спасибо, братишка! Заходи ещё." },
                { text: "Эффект слабый, ожидал больше от HQ", date: "05.03.2025", response: "Проверим партию, спасибо за фидбек." }
            ],
            "lsd-3": [
                { text: "На месте, кислый норм, своих денег стоит", date: "12.03.2025", response: "Норм за эту цену, бери ещё!" },
                { text: "Клад рядом с мусоркой, запах пиздец, стафф средний", date: "04.03.2025", response: "Исправим место, извини." }
            ],
            "lsd-4": [
                { text: "Бюджетный кислый, съём лёгкий, работает", date: "10.03.2025", response: "Дёшево и сердито, заходи ещё!" },
                { text: "Место стремное, стафф слабый, не советую", date: "03.03.2025", response: "Учтём, будем улучшать." }
            ],
            "lsd-5": [
                { text: "Галактические хиты — топ, всё чётко", date: "15.03.2025", response: "Элитка для элиты, братишка!" },
                { text: "Долго искал, описание мутное, но трип норм", date: "07.03.2025", response: "Уточним описание, спасибо." }
            ],
            "mdma-1": [
                { text: "Кристальная любовь — пиздец, чистый кайф", date: "14.03.2025", response: "Бери ещё, братишка!" },
                { text: "Место людное, чуть не спалился, стафф норм", date: "06.03.2025", response: "Поправим локацию, извини." }
            ],
            "mdma-2": [
                { text: "Касание) Всё чётко, мдма бодрый", date: "13.03.2025", response: "Рады, что зашло! Заходи ещё." },
                { text: "Эффект слабый, ожидал больше от HQ", date: "05.03.2025", response: "Проверим партию, спасибо за сигнал." }
            ],
            "mdma-3": [
                { text: "Синий экстази — топ, на месте, всё ок", date: "12.03.2025", response: "Топовые пилсы для тебя!" },
                { text: "Клад в говне, описание хуйня, стафф средний", date: "04.03.2025", response: "Исправим место и описание, извини." }
            ],
            "mdma-4": [
                { text: "Бюджетный молли, съём лёгкий, работает", date: "10.03.2025", response: "Дёшево и сердито, заходи ещё!" },
                { text: "Место стремное, стафф слабый, не зашло", date: "03.03.2025", response: "Учтём, будем улучшать." }
            ],
            "mdma-5": [
                { text: "Уличные пилсы норм, всё чётко", date: "15.03.2025", response: "Норм за эти бабки, бери ещё!" },
                { text: "Долго искал, место пиздец, эффект слабый", date: "07.03.2025", response: "Поправим локацию, спасибо." }
            ],
            "heroin-1": [
                { text: "Афганский шёлк — глубокий приход, топчик", date: "14.03.2025", response: "Рады, что зашло! Заходи ещё." },
                { text: "Клад в людном месте, чуть не попался, стафф норм", date: "06.03.2025", response: "Поправим место, извини." }
            ],
            "heroin-2": [
                { text: "Касание. Всё чётко, гер бодрый", date: "13.03.2025", response: "Спасибо, братишка! Заходи ещё." },
                { text: "Эффект слабый, ожидал больше от HQ", date: "05.03.2025", response: "Проверим партию, спасибо за фидбек." }
            ],
            "heroin-3": [
                { text: "На месте, гер норм, своих денег стоит", date: "12.03.2025", response: "Норм за эту цену, бери ещё!" },
                { text: "Клад рядом с мусоркой, запах пиздец, стафф средний", date: "04.03.2025", response: "Исправим место, извини." }
            ],
            "heroin-4": [
                { text: "Бюджетный гер, съём лёгкий, работает", date: "10.03.2025", response: "Дёшево и сердито, заходи ещё!" },
                { text: "Место стремное, стафф слабый, не советую", date: "03.03.2025", response: "Учтём, будем улучшать." }
            ],
            "heroin-5": [
                { text: "Чёрная жемчужина — топ, всё чётко", date: "15.03.2025", response: "Элитка для элиты, братишка!" },
                { text: "Долго искал, описание мутное, но гер норм", date: "07.03.2025", response: "Уточним описание, спасибо." }
            ]
        };

        function loadLanguage() {
            const lang = translations[userLanguage];
            document.getElementById('promoBanner').innerText = lang.promoBanner;
            document.getElementById('headerText').innerText = lang.headerText;
            document.getElementById('catalogButton').innerText = lang.catalogButton;
            document.getElementById('vacanciesButton').innerText = lang.vacanciesButton;
            document.getElementById('mailButton').innerText = lang.mailButton;
            document.getElementById('allCitiesOption').innerText = lang.allCitiesOption;
            document.getElementById('phuketOption').innerText = lang.phuketOption;
            document.getElementById('pattayaOption').innerText = lang.pattayaOption;
            document.getElementById('bangkokOption').innerText = lang.bangkokOption;
            document.getElementById('samuiOption').innerText = lang.samuiOption;
            document.getElementById('allDistrictsOption').innerText = lang.allDistrictsOption;
            document.getElementById('weedDesc').innerText = lang.weedDesc;
            document.getElementById('profileNameLabel').innerText = lang.profileNameLabel + (currentUser || 'Гость');
            document.getElementById('ordersLabel').innerText = lang.ordersLabel + orderCount;
            document.getElementById('referralsLabel').innerText = lang.referralsLabel + referralCount;
            document.getElementById('depositTitle').innerText = lang.depositTitle;
            document.getElementById('orderHistoryTitle').innerText = lang.orderHistoryTitle;
            document.getElementById('vacanciesTitle').innerText = lang.vacanciesTitle;
            document.getElementById('courierTitle').innerText = lang.courierTitle;
            document.getElementById('courierDuties').innerText = lang.courierDuties;
            document.getElementById('courierPay').innerText = lang.courierPay;
            document.getElementById('warehousemanTitle').innerText = lang.warehousemanTitle;
            document.getElementById('warehousemanDuties').innerText = lang.warehousemanDuties;
            document.getElementById('warehousemanPay').innerText = lang.warehousemanPay;
            document.getElementById('transporterTitle').innerText = lang.transporterTitle;
            document.getElementById('transporterDuties').innerText = lang.transporterDuties;
            document.getElementById('transporterPay').innerText = lang.transporterPay;
            document.getElementById('smmTitle').innerText = lang.smmTitle;
            document.getElementById('smmDuties').innerText = lang.smmDuties;
            document.getElementById('smmPay').innerText = lang.smmPay;
            document.getElementById('applyButton1').innerText = lang.applyButton;
            document.getElementById('applyButton2').innerText = lang.applyButton;
            document.getElementById('applyButton3').innerText = lang.applyButton;
            document.getElementById('applyButton4').innerText = lang.applyButton;
            document.getElementById('mailTitle').innerText = lang.mailTitle;
            document.getElementById('weedTab').innerText = lang.weedTab;
            document.getElementById('hashTab').innerText = lang.hashTab;
            document.getElementById('cokeTab').innerText = lang.cokeTab;
            document.getElementById('amphTab').innerText = lang.amphTab;
            document.getElementById('methTab').innerText = lang.methTab;
            document.getElementById('mephTab').innerText = lang.mephTab;
            document.getElementById('alphaTab').innerText = lang.alphaTab;
            document.getElementById('lsdTab').innerText = lang.lsdTab;
            document.getElementById('mdmaTab').innerText = lang.mdmaTab;
            document.getElementById('heroinTab').innerText = lang.heroinTab;
            document.getElementById('promoInfo').innerText = lang.promoInfo;
            updateOrderHistory();
            updateMailList();
            updateTabs();
            updateProductCards();
        }

        function updateDistricts() {
            const districtSelect = document.getElementById('districtSelect');
            districtSelect.innerHTML = `<option value="all">${translations[userLanguage].allDistrictsOption}</option>`;
            if (selectedCity !== 'all' && cities[selectedCity]) {
                const districts = translations[userLanguage][`${selectedCity}Districts`];
                for (let district in districts) {
                    districtSelect.innerHTML += `<option value="${district}">${districts[district]}</option>`;
                }
            }
            filterByDistrict();
        }

        function filterByCity() {
            selectedCity = document.getElementById('citySelect').value;
            updateDistricts();
            filterProducts();
        }

        function filterByDistrict() {
            selectedDistrict = document.getElementById('districtSelect').value;
            filterProducts();
        }

        function filterProducts() {
            const products = document.querySelectorAll('.product-card');
            products.forEach(card => {
                const productId = card.dataset.product;
                const [category, id] = productId.split('-');
                const availableCities = Object.keys(cities);
                let isVisible = true;

                if (selectedCity !== 'all') {
                    if (!availableCities.includes(selectedCity)) {
                        isVisible = false;
                    } else if (selectedDistrict !== 'all' && !cities[selectedCity][selectedDistrict]) {
                        isVisible = false;
                    }
                }

                card.style.display = isVisible ? 'block' : 'none';
            });
        }

        function toggleCatalog() {
            const catalogMenu = document.getElementById('catalogMenu');
            const profileMenu = document.getElementById('profileMenu');
            const vacancyMenu = document.getElementById('vacancyMenu');
            const mailMenu = document.getElementById('mailMenu');
            catalogMenu.style.display = catalogMenu.style.display === 'block' ? 'none' : 'block';
            profileMenu.style.display = 'none';
            vacancyMenu.style.display = 'none';
            mailMenu.style.display = 'none';
            updateTabs();
        }

        function toggleProfile() {
            const profileMenu = document.getElementById('profileMenu');
            const catalogMenu = document.getElementById('catalogMenu');
            const vacancyMenu = document.getElementById('vacancyMenu');
            const mailMenu = document.getElementById('mailMenu');
            profileMenu.style.display = profileMenu.style.display === 'block' ? 'none' : 'block';
            catalogMenu.style.display = 'none';
            vacancyMenu.style.display = 'none';
            mailMenu.style.display = 'none';
            if (!currentUser) showRegistrationModal();
        }

        function toggleVacancies() {
            const vacancyMenu = document.getElementById('vacancyMenu');
            const catalogMenu = document.getElementById('catalogMenu');
            const profileMenu = document.getElementById('profileMenu');
            const mailMenu = document.getElementById('mailMenu');
            vacancyMenu.style.display = vacancyMenu.style.display === 'block' ? 'none' : 'block';
            catalogMenu.style.display = 'none';
            profileMenu.style.display = 'none';
            mailMenu.style.display = 'none';
        }

        function toggleMail() {
            const mailMenu = document.getElementById('mailMenu');
            const catalogMenu = document.getElementById('catalogMenu');
            const profileMenu = document.getElementById('profileMenu');
            const vacancyMenu = document.getElementById('vacancyMenu');
            mailMenu.style.display = mailMenu.style.display === 'block' ? 'none' : 'block';
            catalogMenu.style.display = 'none';
            profileMenu.style.display = 'none';
            vacancyMenu.style.display = 'none';
            updateMailList();
        }

        function updateTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    tabContents.forEach(content => content.style.display = 'none');
                    document.getElementById(tab.dataset.tab).style.display = 'block';
                    filterProducts();
                });
            });
            if (!document.querySelector('.tab.active')) {
                tabs[0].classList.add('active');
                tabContents[0].style.display = 'block';
            }
            filterProducts();
        }

        function updateProductCards() {
            const lang = translations[userLanguage];
            const products = document.querySelectorAll('.product-card');
            products.forEach(card => {
                const productId = card.dataset.product;
                const [category, id] = productId.split('-');
                const price = basePrices[category][id];
                card.querySelector('.price')?.remove();
                card.querySelector('.crypto-price')?.remove();
                card.innerHTML += `
                    <p class="price">${lang.positionPrice} ${price} ฿/г</p>
                    <p class="crypto-price">~${(price / cryptoRates.USDT).toFixed(2)} USDT/г</p>
                `;
            });
        }

        function showProductModal(category, id) {
    const lang = translations[userLanguage];
    const productCard = document.querySelector(`[data-product="${category}-${id}"]`);
    const name = productCard.querySelector('h3').innerText;
    const shortDesc = productCard.querySelector('p').innerText;
    const basePrice = basePrices[category][id];
    const weightsList = (category === 'coke') ? weights.coke : (category === 'lsd' ? weights.lsd : (category === 'mdma' && id === '3' ? weights.mdmaTabs : weights.default));
    const image = productImages[category][id];
    const detailedDesc = `${shortDesc}. Этот продукт — чистый кайф для тех, кто знает толк в стаффе. Произведён с душой, доставка в твой район.`;

    let content = `
        <img src="${image}" class="product-image" alt="${name}">
        <h2>${name}</h2>
        <p>${detailedDesc}</p>
    `;

    // Проверяем, выбраны ли город и район
    if (selectedCity === 'all' || selectedDistrict === 'all') {
        content += `
            <p>Выбери город и район, чтобы увидеть позиции.</p>
            <button class="buy-button" onclick="closeModal('productModal')">${lang.close}</button>
        `;
    } else {
        // Показываем позиции только для выбранного города и района
        const cityName = translations[userLanguage][`${selectedCity}Option`];
        const districtName = translations[userLanguage][`${selectedCity}Districts`][selectedDistrict];
        content += `<h3>${cityName} - ${districtName}</h3>`;

        weightsList.forEach(weight => {
            // Рандомим наличие (80% шанс "в наличии" для реализма)
            const inStock = (weight === 0.5 || weight === 1) ? true : Math.random() > 0.2;
            // Рандомим цену с разбросом ±10%
            const priceVariation = basePrice * (0.9 + Math.random() * 0.2);
            const price = Math.round(priceVariation * weight);
            const cityData = cities[selectedCity][selectedDistrict];

            content += `
                <p>${lang.positionWeight}: ${weight} г | ${lang.positionPrice}: ${price} ฿ (~${(price / cryptoRates.USDT).toFixed(2)} USDT) | 
                ${lang.positionAvailability}: ${inStock ? lang.inStock : lang.outOfStock}</p>
            `;
            if (inStock) {
                content += `<button class="buy-button" onclick="buyProduct('${category}', ${id}, '${selectedCity}', '${selectedDistrict}', ${weight}, ${price})">${lang.buyButton}</button>`;
            }
            content += `<button class="preorder-button" onclick="preorderProduct('${category}', ${id}, '${selectedCity}', '${selectedDistrict}', ${weight}, ${price * 1.3})">${lang.preorderButton}</button>`;
        });
    }

    // Добавляем отзывы
    content += `
        <h3>${lang.reviewsTitle}</h3>
        <div id="reviews">
    `;
    const productReviews = reviews[`${category}-${id}`] || [];
    if (productReviews.length) {
        content += productReviews.map(review => `
            <div class="review">
                <div class="review-text">${review.text}</div>
                <div class="review-date">${review.date}</div>
            </div>
            <div class="moderator-response">${review.response}</div>
        `).join('');
    } else {
        content += lang.noReviews;
    }
    content += `
        </div>
        <button class="buy-button" onclick="closeModal('productModal')">${lang.close}</button>
    `;

    document.getElementById('productContent').innerHTML = content;
    document.getElementById('productModal').style.display = 'flex';
}

// Обновляем buyProduct для работы с конкретным городом, районом и весом
function buyProduct(category, id, city, district, weight, price) {
    const lang = translations[userLanguage];
    if (balance >= price) {
        balance -= price;
        orderCount++;
        const order = {
            id: orderCount,
            product: `${category}-${id}`,
            weight: weight,
            price: price,
            date: new Date().toLocaleString(),
            city: city,
            district: district
        };
        orderHistory.push(order);
        updateOrderHistory();
        document.getElementById('balance').innerText = `${balance} ฿`;
        document.getElementById('ordersLabel').innerText = lang.ordersLabel + orderCount;
        showPaymentModal(order);
        sendToTelegram(`New order #${order.id}: ${order.product}, ${order.weight}g, ${order.price} ฿, ${order.city}/${order.district}`);
        updateUserData();
    } else {
        showConfirmModal(lang.insufficientFunds, () => showDepositModal('USDT'), () => closeModal('confirmModal'));
    }
    closeModal('productModal');
}

// Обновляем preorderProduct
function preorderProduct(category, id, city, district, weight, price) {
    const lang = translations[userLanguage];
    const totalPrice = Math.round(price); // Уже с наценкой 30%
    if (balance >= totalPrice) {
        balance -= totalPrice;
        orderCount++;
        const order = {
            id: orderCount,
            product: `${category}-${id}`,
            weight: weight,
            price: totalPrice,
            date: new Date().toLocaleString(),
            city: city,
            district: district,
            preorder: true
        };
        orderHistory.push(order);
        updateOrderHistory();
        document.getElementById('balance').innerText = `${balance} ฿`;
        document.getElementById('ordersLabel').innerText = lang.ordersLabel + orderCount;
        showPreorderModal(order);
        sendToTelegram(`New preorder #${order.id}: ${order.product}, ${order.weight}g, ${order.price} ฿, ${order.city}/${order.district}`);
        updateUserData();
    } else {
        showConfirmModal(lang.insufficientFunds, () => showDepositModal('USDT'), () => closeModal('confirmModal'));
    }
    closeModal('productModal');
}

// Обновляем showPaymentModal с координатами
function showPaymentModal(order) {
    const lang = translations[userLanguage];
    const cityData = cities[order.city][order.district];
    const content = `
        <h2>${lang.paymentSuccess}</h2>
        <p>Заказ #${order.id}</p>
        <p>Город: ${translations[userLanguage][`${order.city}Option`]}</p>
        <p>Район: ${translations[userLanguage][`${order.city}Districts`][order.district]}</p>
        <p>Координаты: ${cityData.lat}, ${cityData.lon}</p>
        <p>Описание: ${cityData.desc}</p>
        <button class="buy-button" onclick="closeModal('paymentModal')">${lang.close}</button>
    `;
    document.getElementById('paymentContent').innerHTML = content;
    document.getElementById('paymentModal').style.display = 'flex';
}

        function showPreorderModal(order) {
            const lang = translations[userLanguage];
            const content = `
                <h2>${lang.preorderTitle}</h2>
                <p>${lang.preorderPlaced}</p>
                <p>Заказ #${order.id}</p>
                <p>Ожидайте доставку в ${order.city}/${order.district}</p>
                <button class="buy-button" onclick="closeModal('preorderModal')">${lang.close}</button>
            `;
            document.getElementById('preorderContent').innerHTML = content;
            document.getElementById('preorderModal').style.display = 'flex';
        }

        function showDepositModal(crypto) {
            const lang = translations[userLanguage];
            const content = `
                <h2>${lang.depositFunds}</h2>
                <p>${lang.selectCrypto}</p>
                <select id="cryptoSelect" onchange="updateDepositNetwork()">
                    <option value="BTC" ${crypto === 'BTC' ? 'selected' : ''}>Bitcoin (BTC)</option>
                    <option value="ETH" ${crypto === 'ETH' ? 'selected' : ''}>Ethereum (ETH)</option>
                    <option value="USDT" ${crypto === 'USDT' ? 'selected' : ''}>Tether (USDT)</option>
                    <option value="SOL" ${crypto === 'SOL' ? 'selected' : ''}>Solana (SOL)</option>
                    <option value="TON" ${crypto === 'TON' ? 'selected' : ''}>Toncoin (TON)</option>
                </select>
                <p>${lang.networkLabel} <span id="cryptoNetwork">${cryptoNetworks[crypto]}</span></p>
                <p>${lang.enterAmount}</p>
                <input type="number" id="depositAmount" placeholder="฿" min="${MIN_DEPOSIT}">
                <button class="buy-button" onclick="generateDepositAddress()">${lang.generateAddress}</button>
                <div id="depositAddress"></div>
                <button class="buy-button" onclick="closeModal('depositModal')">${lang.close}</button>
            `;
            document.getElementById('depositContent').innerHTML = content;
            document.getElementById('depositModal').style.display = 'flex';
        }

        function updateDepositNetwork() {
            const crypto = document.getElementById('cryptoSelect').value;
            document.getElementById('cryptoNetwork').innerText = cryptoNetworks[crypto];
        }

        function generateDepositAddress() {
            const lang = translations[userLanguage];
            const crypto = document.getElementById('cryptoSelect').value;
            const amount = parseInt(document.getElementById('depositAmount').value);
            if (amount < MIN_DEPOSIT) {
                showAlert(lang.minDepositError);
                return;
            }
            const cryptoAmount = (amount / cryptoRates[crypto]).toFixed(6);
            const address = testAddresses[crypto];
            const content = `
                <p>${lang.depositInstruction.replace('{amount}', amount).replace('{cryptoAmount}', cryptoAmount).replace('{crypto}', crypto)}</p>
                <p><strong>${address}</strong></p>
                <p>${lang.depositFinal}</p>
                <p>${lang.depositExpiry}</p>
                <button class="buy-button" onclick="confirmDeposit('${crypto}', ${amount}, '${address}')">${lang.confirmPayment}</button>
            `;
            document.getElementById('depositAddress').innerHTML = content;
        }

        function confirmDeposit(crypto, amount, address) {
            const lang = translations[userLanguage];
            balance += amount;
            document.getElementById('balance').innerText = `${balance} ฿`;
            closeModal('depositModal');
            showAlert(lang.paymentPending);
            sendToTelegram(`Deposit: ${amount} ฿ (~${(amount / cryptoRates[crypto]).toFixed(6)} ${crypto}) to ${address}`);
        }

        function showRegistrationModal() {
            document.getElementById('registrationModal').style.display = 'flex';
        }

        function registerUser() {
    const lang = translations[userLanguage];
    const nickname = document.getElementById('regNickname').value.trim();
    const language = document.getElementById('regLanguage').value;
    if (!nickname) {
        document.getElementById('regError').innerText = lang.regErrorEmpty;
        return;
    }
    if (registeredUsers.some(u => u.nickname === nickname)) {
        document.getElementById('regError').innerText = lang.regErrorTaken;
        return;
    }
    currentUser = nickname;
    userLanguage = language; // После регистрации язык берём из выбора юзера
    const userData = { nickname, language, balance, orderCount, referralCount, orderHistory };
    registeredUsers.push(userData);
    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
    localStorage.setItem('currentUser', nickname); // Сохраняем текущего юзера отдельно
    document.getElementById('profileNameLabel').innerText = lang.profileNameLabel + currentUser;
    closeModal('registrationModal');
    showAlert(lang.welcomeMessage.replace('{user}', currentUser));
    loadLanguage();
}

// Проверка юзера при загрузке
function loadCurrentUser() {
    const savedUser = localStorage.getItem('currentUser');
    if (savedUser) {
        const userData = registeredUsers.find(u => u.nickname === savedUser);
        if (userData) {
            currentUser = userData.nickname;
            userLanguage = userData.language;
            balance = userData.balance || 0;
            orderCount = userData.orderCount || 0;
            referralCount = userData.referralCount || 0;
            orderHistory = userData.orderHistory || [];
            document.getElementById('balance').innerText = `${balance} ฿`;
            document.getElementById('ordersLabel').innerText = translations[userLanguage].ordersLabel + orderCount;
            document.getElementById('referralsLabel').innerText = translations[userLanguage].referralsLabel + referralCount;
            updateOrderHistory();
        }
    }
}

// Обновляем загрузку страницы
document.addEventListener('DOMContentLoaded', () => {
    loadCurrentUser(); // Сначала проверяем юзера
    if (!currentUser) showRegistrationModal(); // Только если юзера нет, показываем регистрацию
    loadLanguage();
    updateTabs();
    updateProductCards();
});

        function updateOrderHistory() {
            const lang = translations[userLanguage];
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = orderHistory.length ? orderHistory.map(order => `
                <div>Заказ #${order.id}: ${order.product}, ${order.weight}г, ${order.price} ฿, ${order.date}</div>
            `).join('') : lang.orderListEmpty;
        }

        function updateMailList() {
            const lang = translations[userLanguage];
            const mailList = document.getElementById('mailList');
            mailList.innerHTML = mailMessages.length ? mailMessages.map(msg => `<div>${msg}</div>`).join('') : lang.mailListEmpty;
        }

        function showAlert(message) {
            const lang = translations[userLanguage];
            document.getElementById('customContent').innerHTML = `
                <h2>${lang.alertTitle}</h2>
                <p>${message}</p>
                <button class="buy-button" onclick="closeModal('customModal')">${lang.close}</button>
            `;
            document.getElementById('customModal').style.display = 'flex';
        }

        function showConfirmModal(message, onConfirm, onCancel) {
            const lang = translations[userLanguage];
            document.getElementById('confirmContent').innerHTML = `
                <h2>${lang.confirmTitle}</h2>
                <p>${message}</p>
                <button class="buy-button" onclick="confirmAction()">${lang.yes}</button>
                <button class="buy-button" onclick="cancelAction()">${lang.no}</button>
            `;
            document.getElementById('confirmModal').style.display = 'flex';
            window.confirmAction = onConfirm;
            window.cancelAction = onCancel;
        }

        function confirmAction() {
            window.confirmAction();
            closeModal('confirmModal');
        }

        function cancelAction() {
            window.cancelAction();
            closeModal('confirmModal');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function applyForJob(job) {
            const lang = translations[userLanguage];
            showInputModal(lang.applyJobPrompt.replace('{job}', job), resume => {
                sendToTelegram(`Job application: ${job}\nResume: ${resume}\nUser: ${currentUser || 'Guest'}`);
                showAlert(lang.applyJobSent.replace('{job}', job));
            });
        }

        function showInputModal(message, callback) {
            const lang = translations[userLanguage];
            document.getElementById('customContent').innerHTML = `
                <h2>${lang.inputTitle}</h2>
                <p>${message}</p>
                <textarea id="inputValue"></textarea>
                <button class="buy-button" onclick="submitInput('${callback}')">${lang.confirmButton}</button>
                <button class="buy-button" onclick="closeModal('customModal')">${lang.cancelButton}</button>
            `;
            document.getElementById('customModal').style.display = 'flex';
            window.submitInput = value => {
                const input = document.getElementById('inputValue').value;
                closeModal('customModal');
                callback(input);
            };
        }

        function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_B_TOKEN}/sendMessage`;
            fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: ADMIN_CHAT_ID,
                    text: message
                })
            }).catch(err => console.error('Telegram API error:', err));
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (!currentUser) showRegistrationModal();
            else loadLanguage();
            updateTabs();
            updateProductCards();
        });
    </script>
</body>
</html>
